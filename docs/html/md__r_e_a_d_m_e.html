<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Assignment2_ExpRoLab: Patrolling Algorithm</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Assignment2_ExpRoLab
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Patrolling Algorithm </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>A ROS-based assignment for the Experimental Robotics Laboratory course held at the University of Genoa.</b></p>
<blockquote class="doxtable">
<p>📑: [Code Documentation]() </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md0"></a>
Introduction</h1>
<p>This software architecture has been developed by <a href="https://studentrobotics.org">Student Robotics</a> in ROS to simulate a surveillance robot.</p>
<p>The software developed uses a <a href="http://wiki.ros.org/smach">Smach Finite State Machine</a> FSM and builds an ontology with <a href="https://github.com/EmaroLab/armor">aRMOR</a> based on the information obtained from the markers via the <a href="https://docs.opencv.org/4.x/d5/dae/tutorial_aruco_detection.html">ArUco</a> library.</p>
<p>The robotic arm of the robot is moved using the <a href="https://moveit.ros.org/">MoveIt</a> software framework, while the surveillance action is performed using the <a href="http://wiki.ros.org/gmapping">SLAM Gmapping</a> algortim and the <a href="http://wiki.ros.org/move_base">MoveBase Navigation</a> package.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Software Architecture</h1>
<p>There are 6 nodes in this software architecture:</p><ul>
<li><a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/script/StateMachine.py">StateMachine</a></li>
<li><a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/script/TopologicalMap.py">TopologicalMap</a></li>
<li><a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/script/RandomMovement.py">RandomMovement</a></li>
<li><a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/script/Battery.py">Battery</a></li>
<li><a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/src/marker_detector.cpp">Marker Detector</a></li>
<li><a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/src/marker_server.cpp">Marker Server</a></li>
</ul>
<p>Here we can see the Component-Based Software Engineering diagram: <img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/UML_Diagram.png" alt="UML.png" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md2"></a>
StateMachine node</h2>
<p>In this node, the state machine and the sub-state machine are initialised.</p>
<ul>
<li><p class="startli">Client:</p>
<p class="startli"><code>/Battery_Switch</code> to active the ROOM_E state</p>
<p class="startli"><code>/Movement_Switch</code> to active the RANDOM_MOVEMENT state</p>
<p class="startli"><code>/Mapping_Switch</code> to active the TOPOLOGICAL_MAP state</p>
</li>
<li><p class="startli">Service:</p>
<p class="startli"><code>/BLevel</code> to communicate the battery level and the need for recharging the battery</p>
</li>
</ul>
<p>There are 4 classes representing the states of the finite state machine. Each state is characterised by the initialisation function <code>__init__(self)</code> and the function representing the state execution <code>execute(self, userdata)</code>.</p>
<ul>
<li><p class="startli"><code>class TOPOLOGICAL_MAP(smach.State)</code>: Class implementing FSM state concerning the topological map.</p>
<p class="startli">Within the execute function, a call is made to the server that connects the FSM to the <a class="el" href="namespace_topological_map.html">TopologicalMap</a> node and then waits until the map is constructed.</p>
<p class="startli">Returns the transition of the FSM to be carried out:</p><ul>
<li><code>wait</code>: if the map construction isn't finished</li>
<li><code>map_OK</code>: when map construction ends</li>
</ul>
</li>
<li><p class="startli"><code>class CHOOSE_DESTINATION(samch.State)</code>: Class implementing FSM state conserning the choise of the destination.</p>
<p class="startli">Within the execute function, a call is made to the function <code><a class="el" href="namespace_functions.html#a5fb18ac3019507966ce334e764117002">Destination()</a></code> and 1 second is waited.</p>
<p class="startli">Returns the transition of the FSM to be carried out:</p><ul>
<li><code>b_low</code>: if the robot needs to be recharged</li>
<li><code>destination</code>: when the location in which the robot is to move is chosen</li>
</ul>
</li>
</ul>
<p>This is a piece of code that explains how the location in which the robot moves is chosen: </p><div class="fragment"><div class="line"> Urgent = CleanList(Armor_Client.call(&#39;QUERY&#39;, &#39;IND&#39;, &#39;CLASS&#39;, [&#39;URGENT&#39;]))</div>
<div class="line"> </div>
<div class="line"># Location reachable by the robot</div>
<div class="line">Reachable = CleanList(Armor_Client.call(&#39;QUERY&#39;, &#39;OBJECTPROP&#39;, &#39;IND&#39;, [&#39;canReach&#39;, Robot]))</div>
<div class="line"># Urgent rooms reachable</div>
<div class="line">Urgent = [Value for Value in Reachable if Value in Urgent]</div>
<div class="line"> </div>
<div class="line"># If several rooms are urgent, choose one randomly</div>
<div class="line">if Urgent:</div>
<div class="line">    Target = random.choice(Urgent)</div>
<div class="line"># If no room is urgent, choose a reachable corridor randomly</div>
<div class="line">else:</div>
<div class="line">    Target = [Idx for Idx in Reachable if Idx in Corridors]</div>
<div class="line">    if Target:</div>
<div class="line">        Target = random.choice(Target)</div>
<div class="line"># If no corridor is reachable, randomly choose a reachable location</div>
<div class="line">    else:</div>
<div class="line">        Target = random.choice(Reachable)</div>
<div class="line"> </div>
<div class="line">print(f&#39;Choose location {Target}&#39;)</div>
<div class="line">return Target</div>
</div><!-- fragment --><ul>
<li><p class="startli"><code>class RANDOM_MOVEMNT(smach.State)</code>: Class implementing FSM state concerning the random movement.</p>
<p class="startli">Within the execute function, a call is made to the server connecting the FSM to the <a class="el" href="namespace_random_movement.html">RandomMovement</a> node, and then you wait until the robot arrives at its destination.</p>
<p class="startli">Returns the transition of the FSM to be carried out:</p><ul>
<li><code>b_low</code>: if the robot needs to be recharged</li>
<li><code>move</code>: if the robot can move between the rooms</li>
<li><code>wait</code>: if the goal isn't reached yet</li>
</ul>
</li>
<li><p class="startli"><code>class ROOM_E(smach.State)</code>: Class implementing FSM state concerning the room E.</p>
<p class="startli">Within the execute function, a call is made to the server connecting the FSM to the <a class="el" href="namespace_battery.html">Battery</a> node, and and then wait until the robot arrives in charging room E and the battery is fully recharged.</p>
<p class="startli">Returns the transition of the FSM to be carried out:</p><ul>
<li><code>move</code>: if the robot can move between the rooms</li>
<li><code>wait</code>: if the battery isn't full yet</li>
</ul>
</li>
</ul>
<p>Running the FSM node in the terminal should show similar output</p>
<p><img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/SM_Terminal.png" alt="SM_Terminal.png" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md3"></a>
TopologicalMap node</h2>
<p>This node allows the map to be constructed by loading the ontology, based on the information obtained from the markers. Once the map is constructed, a signal is sent to the FSM.</p>
<ul>
<li><p class="startli">Subscribes to:</p>
<p class="startli"><code>/MarkerList</code> to retrive information from ArUco markers</p>
</li>
<li><p class="startli">Client:</p>
<p class="startli"><code>ArmorClient</code></p>
</li>
</ul>
<p>The present class is characterised by 2 methods:</p>
<ul>
<li><p class="startli"><code>IDCallback(lst)</code>:</p>
<p class="startli">Callback to retrieve codes from ArUco markers and embed them in a list.</p>
</li>
<li><p class="startli"><code>MappingSwitchCB(req)</code>:</p>
<p class="startli">Function to inform the FSM that the ontology has been build with the relevant information about the rooms and robot's initial position.</p>
</li>
</ul>
<p>Running the <a class="el" href="namespace_topological_map.html">TopologicalMap</a> node in the terminal should show similar output</p>
<p><img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/TM_Terminal.png" alt="TM_Terminal.png" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md4"></a>
RandomMovement node</h2>
<p>This node manages the movement of the robot based on information obtained about the target room chosen by the FSM.</p>
<p>Based on the position and battery status it informs the FSM if the final position has been reached or if the goal has been cancelled.</p>
<ul>
<li><p class="startli">Publishes to:</p>
<p class="startli"><code>/A/jointC_position_controller/command</code> to publish the camera joint position</p>
</li>
<li><p class="startli">Subscribes to:</p>
<p class="startli"><code>/Room</code> to establish the target room</p>
<p class="startli"><code>/odom</code> where the simulator publishes the robot position</p>
</li>
<li><p class="startli">Client:</p>
<p class="startli"><code>ArmorClient</code></p>
<p class="startli"><code>MoveBaseAction</code></p>
<p class="startli"><code>/BLevel</code> to manage the robot's battery level</p>
</li>
<li><p class="startli">Service:</p>
<p class="startli"><code>/Mapping_Switch</code> to active the RANDOM_MOVEMENT state</p>
<p class="startli"><code>MoveBaseGoal</code></p>
</li>
</ul>
<p>The present class is characterised by 4 methods:</p>
<ul>
<li><p class="startli"><code>RoomCB(Location)</code>:</p>
<p class="startli">Callback to obtain information about the robot's target location.</p>
</li>
<li><p class="startli"><code>OdomCB(data)</code>:</p>
<p class="startli">Callback to obtain the actual position of the robot via odometry.</p>
</li>
<li><p class="startli"><code>MovementSwitchCB(req)</code>:</p>
<p class="startli">Function to inform the finished state machine FSM if the robot has reached the final position.</p>
</li>
<li><p class="startli"><code>MoveBaseA(Loc)</code>:</p>
<p class="startli">Function to control the movement of the robot.</p>
<p class="startli">When the robot reaches the final position, it inspects the room. The goal is cancelled if the battery is less than 30%. The battery check is performed considering the distance the robot travels.</p>
</li>
</ul>
<div class="fragment"><div class="line">print(f&#39;Actual position: ({self.previous_x},{self.previous_y})&#39;)</div>
<div class="line"> </div>
<div class="line">self.Goal.target_pose.pose.position.x = F.CleanList(Armor_Client.call(&#39;QUERY&#39;, &#39;DATAPROP&#39;, &#39;IND&#39;, [&#39;hasCoordinatesX&#39;, Loc]))[0]</div>
<div class="line">self.Goal.target_pose.pose.position.y = F.CleanList(Armor_Client.call(&#39;QUERY&#39;, &#39;DATAPROP&#39;, &#39;IND&#39;, [&#39;hasCoordinatesY&#39;, Loc]))[0]</div>
<div class="line">self.Goal.target_pose.pose.position.x = float(self.Goal.target_pose.pose.position.x)</div>
<div class="line">self.Goal.target_pose.pose.position.y = float(self.Goal.target_pose.pose.position.y)</div>
<div class="line"> </div>
<div class="line">F.MoveRobot(Loc)</div>
<div class="line"> </div>
<div class="line">print(f&#39;Moving to ({self.Goal.target_pose.pose.position.x},{self.Goal.target_pose.pose.position.y}) position&#39;)</div>
<div class="line">self.MBClient.send_goal(self.Goal)</div>
<div class="line"> </div>
<div class="line">dist = math.sqrt(pow(self.Goal.target_pose.pose.position.x - self.previous_x, 2) +</div>
<div class="line">            pow(self.Goal.target_pose.pose.position.y - self.previous_y, 2))</div>
<div class="line">print(f&#39;To reach {Loc} I need to travel {round(dist)}m&#39;)</div>
<div class="line"> </div>
<div class="line">print(&#39;Waiting for the result ...&#39;)</div>
<div class="line">self.MBClient.wait_for_result()</div>
<div class="line">resp = self.Bat_Client(round(dist))</div>
<div class="line"> </div>
<div class="line">x = abs(self.Goal.target_pose.pose.position.x - actual_x)</div>
<div class="line">y = abs(self.Goal.target_pose.pose.position.y - actual_y)        </div>
<div class="line"> </div>
<div class="line">if resp.LevelF &lt; 30 and Loc != &#39;E&#39;:</div>
<div class="line">    # Cancel goal</div>
<div class="line">    self.MBClient.cancel_goal()</div>
<div class="line">    self.DestReach = False</div>
<div class="line">elif (x &lt;= 1 and y &lt;= 1) or Loc == &#39;E&#39;:</div>
<div class="line">    print(f&#39;{Loc} reached&#39;)</div>
<div class="line">    self.Omega.data = 0.0</div>
<div class="line">    self.Pub_PoseCamera.publish(self.Omega)</div>
<div class="line"> </div>
<div class="line">    # RGB camera rotation around the z-axis</div>
<div class="line">    print(&#39;Inspection&#39;)</div>
<div class="line">    while self.Omega.data &lt;= 2*math.pi:</div>
<div class="line">        self.Omega.data += math.pi/4</div>
<div class="line">        print(self.Omega.data)</div>
<div class="line">        self.Pub_PoseCamera.publish(self.Omega)</div>
<div class="line">        self.Group.move()   </div>
<div class="line">        time.sleep(0.5)</div>
<div class="line"> </div>
<div class="line">    self.Pub_PoseCamera.publish(0.0)</div>
<div class="line">    self.DestReach = True</div>
<div class="line">else:</div>
<div class="line">    # Cancel goal</div>
<div class="line">    self.MBClient.cancel_goal()</div>
<div class="line">    print(&#39;The robot failed to reach the goal for some reason&#39;)</div>
<div class="line">    self.DestReach = False</div>
<div class="line"> </div>
<div class="line">self.previous_x = F.CleanList(Armor_Client.call(&#39;QUERY&#39;, &#39;DATAPROP&#39;, &#39;IND&#39;, [&#39;hasCoordinatesX&#39;, Loc]))[0]</div>
<div class="line">self.previous_y = F.CleanList(Armor_Client.call(&#39;QUERY&#39;, &#39;DATAPROP&#39;, &#39;IND&#39;, [&#39;hasCoordinatesY&#39;, Loc]))[0]</div>
<div class="line">self.previous_x = float(self.previous_x)</div>
<div class="line">self.previous_y = float(self.previous_y)</div>
<div class="line"> </div>
<div class="line">return self.DestReach</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
Battery node</h2>
<p>This node allows the robot to recharge its battery in room E. Once the battery is fully charged, the FSM is informed.</p>
<ul>
<li><p class="startli">Client:</p>
<p class="startli"><code>/BLevel</code> to manage the robot's battery level</p>
<p class="startli"><code>/Movement_Switch</code> to move the robot into room E where it can recharge itself</p>
</li>
<li><p class="startli">Service:</p>
<p class="startli"><code>/Recharging_Switch</code> to active the ROOM_E state</p>
</li>
</ul>
<p>The present class is characterised by 1 method:</p>
<ul>
<li><p class="startli"><code>BatterySwitchCB(req)</code>:</p>
<p class="startli">Function for recharging the battery and informing the finished state machine FSM.</p>
</li>
</ul>
<p>Running the <a class="el" href="namespace_battery.html">Battery</a> node in the terminal should show similar output</p>
<p><img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/B_Terminal.png" alt="B_Terminal.png" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md6"></a>
Marker Detector node</h2>
<p>Through this node, the initial room in which the robot is located is inspected in order to identify all markers and to be able to derive information about the locations in which the robot will later move.</p>
<ul>
<li><p class="startli">Subscribes to:</p>
<p class="startli"><code>RGB/RGB/image_raw</code> to retrieve the robot vision through the camera</p>
</li>
<li><p class="startli">Publishes to:</p>
<p class="startli"><code>/A/jointC_position_controller/command</code> to publish the camera joint position</p>
<p class="startli"><code>/MarkerList</code> in which it is published the markers detected by the robot</p>
</li>
<li><p class="startli">Clients:</p>
<p class="startli"><code>/room_info</code> to obtain information about the environment</p>
</li>
</ul>
<p>The present class is characterised by 3 methods:</p>
<ul>
<li><p class="startli"><code>CallbackCamera(ImFeed)</code>:</p>
<p class="startli">It reads the information from the camera and thanks to the ArUco libraries processes it and detects the respective ArUco marker. It prints on the terminal the detected marker ID.</p>
<p class="startli">Once all the markers are found their ID are published on the topic.</p>
</li>
<li><p class="startli"><code>DetectMarker()</code>:</p>
<p class="startli">This function is used to move the robot joint and to detect the markers.</p>
<p class="startli">In particular the robot arm is set in the 'HomePose' configuration and the RGB joint is move looking at the ground from 0 to 3.14. In this way it looks at all markers.</p>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Marker Server node</h2>
<p>This node contains all the information associated with each room.</p>
<ul>
<li><p class="startli">Service:</p>
<p class="startli"><code>/room_info</code> to share information about the environment</p>
</li>
</ul>
<p>The present class is characterised by 1 method:</p>
<ul>
<li><p class="startli"><code>markerCallback(req, res)</code>:</p>
<p class="startli">This function provides information about a room in a building based on an input ID.</p>
</li>
</ul>
<blockquote class="doxtable">
<p>:memo: <b>Note:</b></p>
<p>In some files, the python script <a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/script/Functions.py">Functions.py</a> is imported.</p>
<p>In this script the various functions used by nodes are defined. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md8"></a>
Installation and running</h1>
<p>In a terminal type the following commands: </p><div class="fragment"><div class="line">$ mkdir -p ROS_ws/src/assignment2</div>
<div class="line">$ cd ROS_ws/src/assignment2</div>
<div class="line">$ git clone https://github.com/AliceRivi14/Assignment2_ExpRoLab.git</div>
<div class="line">$ cd script</div>
<div class="line">$ chmod +x &lt;file_name&gt;</div>
</div><!-- fragment --><p>Before compiling the package, move the moveit folder outside, inside the src folder, and then: </p><div class="fragment"><div class="line">$ cd ../../..</div>
<div class="line">$ catkin_make</div>
</div><!-- fragment --><p>Add the line <code>‘source [ws_path]/devel/setup.bash’</code> in your <code>.bashrc</code> file.</p>
<p>If is not already installed, install smach with </p><div class="fragment"><div class="line">$ sudo apt-get install ros-[ROS-DISTRO]-executive-smach*</div>
</div><!-- fragment --><p>For everything to work properly, the <a href="https://ros-planning.github.io/moveit_tutorials/doc/getting_started/getting_started.html">MoveIt</a>, <a href="https://github.com/CarmineD8/SLAM_packages">SLAM Gmapping</a>, <a href="https://github.com/CarmineD8/aruco_ros">ArUco</a>, <a href="https://github.com/EmaroLab/ros_multi_ontology_references">aRMOR</a> and <a href="https://github.com/CarmineD8/planning">MoveBase</a> package must be compiled.</p>
<p>First, the simulation environment must be run: </p><div class="fragment"><div class="line">$ roslaunch assignment2 moveit.launch</div>
</div><!-- fragment --><p>Wait a few seconds and run the files for the execution of the algorithm: </p><div class="fragment"><div class="line">$ roslaunch assignment2 assignment.launch</div>
</div><!-- fragment --><p>So that there are no errors, the aRMOR service is launched separately: </p><div class="fragment"><div class="line">$ rosrun armor execute it.emarolab.armor.ARMORMainService</div>
</div><!-- fragment --><p>In addition to the terminal in which the file is launched, 5 terminals relating to the ROS nodes appear.</p>
<blockquote class="doxtable">
<p>📝 <b>Note:</b></p>
<p>Change the Path <code>‘[ws_path]/assignment_2/world/topological_map.owl’</code> in the <a href="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/script/TopologicalMap.py">TopologicalMap.py</a> script. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md9"></a>
Working Hypothesis and Environment</h1>
<p>The scenario involves a survillance robot operating in a 2D indoor environment, without obstacles, made of 4 rooms (R1, R2, R3, R4), with only one door, and 3 corridors (E, C1, C2), with multiple doors.</p>
<p><img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/Environment.png" alt="Environment.png" class="inline"/></p>
<p>The behavior of the robot is divided into 2 phases:</p>
<p><b>Phase 1</b>:</p><ol type="1">
<li>The robot starts from the position (-6.0;11.0);</li>
<li>The robot through the movement of the camera must detect the markers in the room and gathers information about the environment;</li>
<li>The robot constructs the "semantic" map of the environment.</li>
</ol>
<p><img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/Marker.png" alt="Marker.png" class="inline"/></p>
<p><b>Phase 2</b>:</p><ol type="1">
<li>The robot moves around locations following a surveillance policy:<ol type="a">
<li>It must stay mainly in the corridors,</li>
<li>If a reachable room has not been visited for a certain period of time, it must visit it (<em>urgency</em>);</li>
</ol>
</li>
<li>The robot moves to a new location and performs a complete scan of the room to visit another location.</li>
<li>When the robot's battery is low, the robot goes to position E and waits for the battery to be recharged before starting the patrolling behaviour again.</li>
</ol>
<p><img src="https://github.com/AliceRivi14/Assignment2_ExpRoLab/blob/main/images/Monitoring.mp4" alt="Monitoring" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md10"></a>
System Limitations</h1>
<p>The main limitation concerns the detection of markers, as the camera does not have a smooth movement and it may happen that even if the marker is seen, its ID is not recognised.</p>
<p>The battery drain is calculated as if each meter travelled by the robot corresponds to a decrease. However, this calculation is made based on the distance between the start and end position, as the crow flies, without taking into account the presence of walls or obstacles, so it does not reflect the real situation.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Possible Improvement</h1>
<p>One improvement to be made is definitely to make the battery discharging and charging routine more realistic.</p>
<p>In addition, all the parameters relating to the movement of the robot joints should also be adjusted in order to have a more linear and efficient marker detection.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Author</h1>
<p><em>Alice Rivi</em></p>
<p>📧: *<a href="#" onclick="location.href='mai'+'lto:'+'S51'+'35'+'011'+'@s'+'tud'+'en'+'ti.'+'un'+'ige'+'.i'+'t'; return false;">S5135<span style="display: none;">.nosp@m.</span>011@<span style="display: none;">.nosp@m.</span>stude<span style="display: none;">.nosp@m.</span>nti.<span style="display: none;">.nosp@m.</span>unige<span style="display: none;">.nosp@m.</span>.it</a>* </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
